---
- name: "Apply common configuration"
  hosts: "all"
  roles:
    - "common"
    - "systemd"

- name: "Apply sysctl configuration"
  hosts: "all,!lxc"
  roles:
    - "sysctl"

- name: "Apply docker daemon configuration"
  hosts: "docker"
  roles:
    - "docker"

- name: "Set up zram"
  hosts: "all,!lxc"
  roles:
    - "zram"

- name: "Set up apt unattended-upgrades and listchanges"
  hosts: "debian"
  roles:
    - "apt-unattended-upgrades"

- name: "Set up needrestart"
  hosts: "all"
  roles:
    - "needrestart"

- name: "Set up msmtp"
  hosts: "all,!nova"
  roles:
    - "msmtp"

- name: "Set up ZFS maintenance and alerts"
  hosts: "zfs"
  roles:
    - "uv"
    - "telegram-send"
    - "zfs-maintenance"
